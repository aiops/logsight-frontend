<div class="row">
  <div class="col">
    <p-card header="User information">
      <div class="row">
        <div class="col">
          <div class="row">
            <div class="col-4"><p>Username:</div>
            <div class="col-8"><b>{{email}}</b></div>
          </div>
          <div class="row text-left">
            <div class="col-4"><p>User ID:</div>
            <div class="col-8"><b>{{userId}}</b></div>
          </div>
          <div class="row">
            <div class="col-4"><p>Password:</div>
            <div class="col-8">
              <p-accordion>
                <p-accordionTab header="Change password">
                  <form (submit)="changePassword()" [formGroup]="formPassword" aria-labelledby="title">
                    <div class="row">
                      <div class="col-lg-12 col-xl-6" style="margin-top: 3px">
                        <input [attr.aria-invalid]="formPassword.invalid && formPassword.touched ? true : null"
                               [required]="true" class="mr-2" formControlName="oldPassword" id="formOldPassword"
                               pPassword placeholder="Enter your old password" type="password"
                               type="password">
                        <div *ngIf="formPassword.controls['oldPassword'].invalid && formPassword.touched">
                          <p *ngIf="formPassword.controls['oldPassword'].errors?.minlength" class="error-message">
                            Password length should be minimum of 8 characters.
                          </p>
                        </div>
                        <br>
                        <br>
                        <input [attr.aria-invalid]="formPassword.invalid && formPassword.touched ? true : null"
                               [required]="true" class="mr-2" formControlName="newPassword" id="formPassword"
                               pPassword placeholder="Enter the new password" type="password"
                        >
                        <div *ngIf="formPassword.controls['newPassword'].invalid && formPassword.touched">
                          <p *ngIf="formPassword.controls['newPassword'].errors?.minlength" class="error-message">
                            Password length should be minimum of 8 characters.
                          </p>
                        </div>
                        <br>
                        <br>
                        <input [attr.aria-invalid]="formPassword.invalid && formPassword.touched ? true : null"
                               [required]="true"
                               class="mr-2" formControlName="repeatNewPassword" id="formRepeatPassword"
                               pPassword
                               placeholder="Repeat the new password"
                               type="password">
                        <div *ngIf="formPassword.touched">
                          <p *ngIf="formPassword.controls['repeatNewPassword'].errors?.minlength" class="error-message">
                            Password length should be minimum of 8 characters.
                          </p>
                          <p *ngIf="!isMatching" class="error-message">
                            Passwords are not matching
                          </p>
                        </div>
                        <br>
                        <br>
                        <button [disabled]="!formPassword.valid" class="p-button-lg" label="Change password"
                                pButton style="text-transform: none">
                        </button>

                      </div>
                      <div class="col-lg-12 col-xl-6">
                      </div>
                    </div>
                  </form>
                </p-accordionTab>
              </p-accordion>
            </div>
          </div>
        </div>
      </div>
    </p-card>
  </div>

  <div class="col">
    <p-card header="Applications">
      <div class="row">
        <div class="col">
          <div class="row  pl-5 pr-5 pt-5 pb-5 justify-content-center">
            <form (submit)="createApplication()" [formGroup]="form" aria-labelledby="title"
                  class="col-12 justify-content-center">
              <div class="form-control-group">
                <div class="row justify-content-center ui-fluid">
                  <input [attr.aria-invalid]="form.invalid && form.touched ? true : null" [required]="true"
                         [style]="{'width':'100%'}"
                         formControlName="name"
                         id="name"
                         pInputText
                         placeholder="Enter application name"
                         type="text">
                  <ng-container *ngIf="form.controls['name'].invalid && form.touched">
                    <p *ngIf="form.controls['name'].errors" class="error-message">
                      Application name must follow the following regex pattern ^[a-z0-9_]*$
                      <br>
                      Contains alphanumeric and ('-', '_')
                    </p>
                  </ng-container>
                </div>
                <div *ngIf="!isSpinning" class="row pt-3 justify-content-center">
                  <button [disabled]="!form.valid"
                          [style]="{'width':'100%'}"
                          class="p-button-lg"
                          label="Create"
                          pButton
                  >
                  </button>
                </div>
              </div>
            </form>
            <div class="row justify-content-center mt-2">
              <div *ngIf="isSpinning" class="spinner-border text-primary" role="status" style="position: relative">
              </div>
            </div>
          </div>
          <div *ngIf="this.applications.length>0" class="row pl-5 pr-5">
            <p-table [value]="applications">
              <ng-template pTemplate="header">
              <tr>
                <th>Id</th>
                <th>Name</th>
                <th>Operation</th>
              </tr>
              </ng-template>
              <ng-template pTemplate="body" let-application>
              <tr>
                <td>{{application.applicationId}}</td>
                <td>{{application.name}}</td>
                <td>
                  <div class="col-auto"><i (click)="removeApplication(application.applicationId)" [title]='"Delete application"'
                                           class="ml-3 fas  fa-trash pointer"></i></div>
                </td>
              </tr>
              </ng-template>
            </p-table>
          </div>

          <div *ngIf="this.applications.length==0" class="row pl-5 pr-5 pb-5 justify-content-center">
            No applications running at the moment.
          </div>
        </div>
      </div>
    </p-card>
  </div>
</div>

