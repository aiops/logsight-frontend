<div class="row">
  <div class="col-md-12 text-right">
    <div style="width: 100%;" class="text-right">
      <button title="Select Date Range" [nbPopover]="dateTimePicker" nbPopoverPlacement="bottom" nbButton
              (click)="openPopover()"
              nbPopoverTrigger="noop"><i class="fa fa-calendar"></i></button>
    </div>
  </div>
</div>
<h6>Incidents</h6>
<chart-heatmap [data]="heatmapData"></chart-heatmap>

<br>
<br>

<nb-card *ngIf="tableData?.semanticCountAds">
  <nb-card-body>
    <div class="col-lg-12 p-0">
      <h6>Critical anomalies</h6>
      <div class="scrollable">
        <table class="table table-striped table-borderless">
          <thead>
          <tr>
            <th style="width: 3%" scope="col"></th>
            <th style="width: 10%" scope="col">Date</th>
            <th style="width: 5%" scope="col">Level</th>
            <th style="width: 82%" scope="col">Message</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let row of tableData.semanticCountAds; let i = index">
            <td>{{i + 1}}</td>
            <td>{{row.timestamp}}</td>
            <td>
                <span [class.error]="row.actualLevel == 'ERROR'"
                      [class.info]="row.actualLevel == 'INFO'"
                      class="mr-2">{{row.actualLevel}}</span>
            </td>
            <td>
              <app-ad-banner [row]="row"></app-ad-banner>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </nb-card-body>
</nb-card>

<nb-card *ngIf="tableData?.countAds">
  <nb-card-body>
    <div class="col-lg-12 p-0">
      <h6>Flow anomalies</h6>
      <div class="scrollable">
        <table class="table table-striped table-borderless">
          <thead>
          <tr>
            <th style="width: 3%" scope="col"></th>
            <th style="width: 10%" scope="col">Date</th>
            <th style="width: 5%" scope="col">Level</th>
            <th style="width: 82%" scope="col">Message</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let row of tableData.countAds; let i = index">
            <td>{{i + 1}}</td>
            <td>{{row.timestamp}}</td>
            <td>
                <span [class.error]="row.actualLevel == 'ERROR'"
                      [class.info]="row.actualLevel == 'INFO'"
                      class="mr-2">{{row.actualLevel}}</span>
            </td>
            <td>
              <app-ad-banner [row]="row"></app-ad-banner>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </nb-card-body>
</nb-card>

<nb-card *ngIf="tableData?.semanticAd">
  <nb-card-body>
    <div class="col-lg-12 p-0">
      <h6>Cognitive anomalies</h6>
      <div class="scrollable">
        <table class="table table-striped table-borderless">
          <thead>
          <tr>
            <th style="width: 3%" scope="col"></th>
            <th style="width: 10%" scope="col">Date</th>
            <th style="width: 5%" scope="col">Level</th>
            <th style="width: 82%" scope="col">Message</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let row of tableData.semanticAd; let i = index">
            <td>{{i + 1}}</td>
            <td>{{row.timestamp}}</td>
            <td>
                <span [class.error]="row.actualLevel == 'ERROR'"
                      [class.info]="row.actualLevel == 'INFO'"
                      class="mr-2">{{row.actualLevel}}</span>
            </td>
            <td>
              <app-ad-banner [row]="row"></app-ad-banner>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </nb-card-body>
</nb-card>

<nb-card *ngIf="tableData?.newTemplates">
  <nb-card-body>
    <div class="col-lg-12 p-0">
      <h6>New log types</h6>
      <div class="scrollable">
        <table class="table table-striped table-borderless">
          <thead>
          <tr>
            <th style="width: 3%" scope="col"></th>
            <th style="width: 10%" scope="col">Date</th>
            <th style="width: 5%" scope="col">Level</th>
            <th style="width: 82%" scope="col">Message</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let row of tableData.newTemplates; let i = index">
            <td>{{i + 1}}</td>
            <td>{{row.timestamp}}</td>
            <td>
                <span [class.error]="row.actualLevel == 'ERROR'"
                      [class.info]="row.actualLevel == 'INFO'"
                      class="mr-2">{{row.actualLevel}}</span>
            </td>
            <td>
              <app-ad-banner [row]="row"></app-ad-banner>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </nb-card-body>
</nb-card>



<ng-template #dateTimePicker>
  <elastic-custom-datepicker (search)="onDateTimeSearch($event)"></elastic-custom-datepicker>
</ng-template>
